<div class="game-container">
  <header class="game-header">
    <div class="game-header__info">
      <h1>{{ collectionTitle() || 'Memory Match' }}</h1>
      <p>
        Pairs found:
        {{ matchedPairs() }} / {{ pairsToFind() }}
      </p>
    </div>
    <div class="game-header__actions">
      <div class="elapsed">Time: {{ formattedElapsedTime() }}</div>
      <div class="attempts">Attempts: {{ attempts() }}</div>
      <button type="button" (click)="startNewGame()">New game</button>
    </div>
  </header>

  <section *ngIf="loading()" class="status-panel">
    <p>Preparing the boardâ€¦</p>
  </section>

  <section *ngIf="!loading() && error()" class="status-panel status-panel--error">
    <p>{{ error() }}</p>
    <button type="button" (click)="startNewGame()">Back to start</button>
  </section>

  <ng-container *ngIf="!loading() && !error()">
    <div *ngIf="allPairsFound()" class="game-complete">
      <h2>Congratulations!</h2>
      <p>
        You found all pairs in {{ attempts() }} {{ attempts() === 1 ? 'attempt' : 'attempts' }}
        and {{ formattedElapsedTime() }}.
      </p>
      <button type="button" (click)="startNewGame()">Play again</button>
    </div>

    <div
      #boardContainer
      class="board"
      [ngStyle]="boardStyle()"
    >
      <app-game-tile
        *ngFor="let tile of tiles(); trackBy: tileTrackBy"
        [tile]="tile"
        (tileSelected)="onTileSelected($event)"
      ></app-game-tile>
    </div>
  </ng-container>
</div>
